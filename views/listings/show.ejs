<!-- <% layout("/layouts/boilerplate") %>

<div class="row mt-3">
    <div class="col-8 offset-2"> 
    <h3>Listing Details</h3>
    </div>
    <div class="row">
    <div class ="card col-6 offset-2">
        <img src="<%= listing.image %>" class="card-img-top show-img" alt="listing_img">
  <div class="card-body">
    <p class="card-text">
        <b><%= listing.title %></b> </br></br>
        <%= listing.description %> </br>
        &#8377; <%= listing.price.toLocaleString("en-IN") %> </br>
        <%= listing.location %> </br>
        <%= listing.country %>
        </p>
  </div>
    </div>
    </div>

    <br>
    <div class="col-1"> <a href = "/listings/<%= listing._id %>/edit" class="btn btn-dark">Edit</a>
    
</div>
   
    <div class="col-1">
        <form method ="POST" action="/listings/<%=listing._id%>?_method=DELETE">
        <button class="btn btn-dark">Delete</button>
    </form>
    </div>
    
    
</div> -->

<% layout("/layouts/boilerplate") %>

<div class="container mt-4">
    <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
            <!-- Page Header -->
            <div class="mb-4">
                <h2 class="fw-bold text-dark mb-2">Listing Details</h2>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/" class="text-decoration-none">Home</a></li>
                        <li class="breadcrumb-item"><a href="/listings" class="text-decoration-none">All Listings</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Details</li>
                    </ol>
                </nav>
            </div>

            <!-- Main Listing Card -->
            <div class="card shadow-lg border-0 rounded-4 overflow-hidden mb-4">
                <!-- Property Image -->
                <div class="position-relative">
                    <img src="<%= listing.image %>" class="card-img-top listing-detail-img" alt="<%= listing.title %>">
                    <div class="position-absolute top-0 end-0 m-3">
                        <span class="badge bg-dark bg-opacity-75 fs-6 px-3 py-2 rounded-pill">
                            ₹<%= listing.price.toLocaleString("en-IN") %>/night
                        </span>
                    </div>
                </div>

                <!-- Property Details -->
                <div class="card-body p-4">
                    <!-- Title and Location -->
                    <div class="mb-4">
                        <h3 class="card-title fw-bold mb-3 text-dark"><%= listing.title %></h3>
                        
                        <!-- Location and Country -->
                        <div class="d-flex align-items-center mb-3 text-muted">
                            <i class="fas fa-map-marker-alt me-2"></i>
                            <span class="fw-medium"><%= listing.location %>, <%= listing.country %></span>
                        </div>

                        <!-- Price -->
                        <div class="d-flex align-items-center mb-3">
                            <i class="fas fa-rupee-sign me-2 text-success"></i>
                            <span class="fs-4 fw-bold text-success">₹<%= listing.price.toLocaleString("en-IN") %></span>
                            <span class="text-muted ms-2">per night</span>
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="mb-4">
                        <h5 class="fw-semibold mb-3 text-dark">About this place</h5>
                        <p class="text-muted lh-lg"><%= listing.description %></p>
                    </div>

                    <!-- Property Features/Amenities (if you want to add them later) -->
                    <div class="mb-4">
                        <h5 class="fw-semibold mb-3 text-dark">What this place offers</h5>
                        <div class="row g-3">
                            <div class="col-sm-6">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-wifi me-3 text-primary"></i>
                                    <span>Free WiFi</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-car me-3 text-primary"></i>
                                    <span>Free parking</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-swimming-pool me-3 text-primary"></i>
                                    <span>Pool</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-dumbbell me-3 text-primary"></i>
                                    <span>Gym</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Location Info -->
                    <div class="mb-4">
                        <h5 class="fw-semibold mb-3 text-dark">Location</h5>
                        <div class="bg-light rounded-3 p-3">
                            <div class="d-flex align-items-start">
                                <i class="fas fa-map-marker-alt me-3 mt-1 text-danger"></i>
                                <div>
                                    <p class="fw-medium mb-1"><%= listing.location %></p>
                                    <p class="text-muted mb-0 small"><%= listing.country %></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="d-flex flex-column flex-sm-row gap-3 mb-5">
                <a href="/listings/<%= listing._id %>/edit" class="btn btn-primary btn-lg rounded-pill px-4 flex-fill">
                    <i class="fas fa-edit me-2"></i>Edit Listing
                </a>
                
                <form method="POST" action="/listings/<%= listing._id %>?_method=DELETE" class="flex-fill">
                    <button type="button" class="btn btn-danger btn-lg rounded-pill px-4 w-100" data-bs-toggle="modal" data-bs-target="#deleteModal">
                        <i class="fas fa-trash-alt me-2"></i>Delete Listing
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow">
            <div class="modal-header border-0 pb-0">
                <h5 class="modal-title fw-bold" id="deleteModalLabel">
                    <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                    Confirm Deletion
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body pt-0">
                <p class="text-muted">Are you sure you want to delete "<strong><%= listing.title %></strong>"? This action cannot be undone.</p>
            </div>
            <div class="modal-footer border-0 pt-0">
                <button type="button" class="btn btn-secondary rounded-pill px-4" data-bs-dismiss="modal">Cancel</button>
                <form method="POST" action="/listings/<%= listing._id %>?_method=DELETE" class="d-inline">
                    <button type="submit" class="btn btn-danger rounded-pill px-4">
                        <i class="fas fa-trash-alt me-2"></i>Delete
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
.listing-detail-img {
    height: 400px;
    width: 100%;
    object-fit: cover;
    border-radius: 0;
}

.card {
    transition: transform 0.2s ease-in-out;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
}

.btn-primary:hover {
    background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
    transform: translateY(-1px);
}

.btn-danger:hover {
    transform: translateY(-1px);
}

.breadcrumb-item + .breadcrumb-item::before {
    content: "›";
    color: #6c757d;
}

@media (max-width: 768px) {
    .listing-detail-img {
        height: 250px;
    }
    
    .btn-lg {
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
    }
}
</style>
